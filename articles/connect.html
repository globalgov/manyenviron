<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How Do Environmental Treaties Connect? • manyenviron</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="How Do Environmental Treaties Connect?">
<meta property="og:description" content="manyenviron">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">manyenviron</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/connect.html">How Do Environmental Treaties Connect?</a>
    </li>
    <li>
      <a href="../articles/lineage_dashboard.html">Lineage of Environmental Treaties</a>
    </li>
    <li>
      <a href="../articles/membership_dashboard.html">Types of Environmental Treaties</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://globalgov.github.io/manydata/" class="external-link">manydata</a>
    </li>
    <li>
      <a href="https://globalgov.github.io/manypkgs/" class="external-link">manypkgs</a>
    </li>
    <li>
      <a href="https://globalgov.github.io/manystates/" class="external-link">manystates</a>
    </li>
    <li>
      <a href="https://globalgov.github.io/manytrade/" class="external-link">manytrade</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/globalgov/manyenviron" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="connect_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How Do Environmental Treaties Connect?</h1>
            
            <h4 data-toc-skip class="date">2024-04-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/globalgov/manyenviron/blob/HEAD/vignettes/connect.Rmd" class="external-link"><code>vignettes/connect.Rmd</code></a></small>
      <div class="hidden name"><code>connect.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="manyenviron-data">manyenviron Data<a class="anchor" aria-label="anchor" href="#manyenviron-data"></a>
</h2>
<p><a href="https://globalgov.github.io/manyenviron/">manyenviron</a> stores several datasets on various aspects of environmental treaties in different datacubes. For example, the <strong>Agreements</strong> datacube is made of multiple datasets of environmental treaty titles with specific information such as the agreement type (e.g. agreements, protocols, amendments, declarations), if they are bilateral or multilateral, and some important dates such as the signature or entry into force. The <strong>Memberships</strong> datacube contains lists of countries with the treaties to which they are parties to. It also includes information on the signature date of the treaty or the withdrawal date of a party. The <strong>References</strong> datacube is composed of a dataset that indicates the relationship (e.g. amended by, cites, superseded by) between two treaties. Finally, the <strong>Texts</strong> datacube stores the text of environmental treaties.</p>
<p>For a quick overview of the datacube and dataset in <a href="https://globalgov.github.io/manyenviron/">manyenviron</a>, we can use the <code><a href="https://globalgov.github.io/manydata/reference/defunct.html" class="external-link">data_contrast()</a></code> function from <a href="https://github.com/globalgov/manydata" class="external-link">manydata</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/globalgov/manydata" class="external-link">manydata</a></span><span class="op">)</span></span>
<span><span class="fu">manydata</span><span class="fu">::</span><span class="fu"><a href="https://globalgov.github.io/manydata/reference/compare_dimensions.html" class="external-link">compare_dimensions</a></span><span class="op">(</span><span class="fu">manyenviron</span><span class="fu">::</span><span class="va"><a href="../reference/agreements.html">agreements</a></span><span class="op">)</span></span>
<span><span class="fu">manydata</span><span class="fu">::</span><span class="fu"><a href="https://globalgov.github.io/manydata/reference/compare_dimensions.html" class="external-link">compare_dimensions</a></span><span class="op">(</span><span class="fu">manyenviron</span><span class="fu">::</span><span class="va"><a href="../reference/memberships.html">memberships</a></span><span class="op">)</span></span></code></pre></div>
<p>To view the bibliographic references for a dataset, a datacube, or the whole package, we can also use <code>code_source()</code> from <a href="https://github.com/globalgov/manydata" class="external-link">manydata</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">manydata</span><span class="fu">::</span><span class="fu"><a href="https://globalgov.github.io/manydata/reference/call_sources.html" class="external-link">call_sources</a></span><span class="op">(</span><span class="st">"manyenviron"</span>, <span class="st">"agreements"</span>, <span class="st">"IEADB"</span><span class="op">)</span></span>
<span><span class="fu">manydata</span><span class="fu">::</span><span class="fu"><a href="https://globalgov.github.io/manydata/reference/call_sources.html" class="external-link">call_sources</a></span><span class="op">(</span><span class="st">"manyenviron"</span>, <span class="st">"memberships"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="connecting-environmental-treaties">Connecting Environmental Treaties<a class="anchor" aria-label="anchor" href="#connecting-environmental-treaties"></a>
</h2>
<p>There are many different ways in which treaties could be linked. For example, a treaty can be substituted by another, complemented by protocols, changed through amendments, and/or cite another treaty. To facilitate the identification and connection between the datacubes in the package, the <code>manypkgs::code_agreements()</code> function has been developed to generate a treatyID for treaties in a datacube. Each of the <a href="https://globalgov.github.io/manyenviron/">manyenviron</a> dataset contains a treatyID column. To understand what are the information provided through by the treatyID, as well as the benefits of using treatyID to spot the relationships between the treaties across several datasets in a datacube, please visit this <a href="https://globalgov.github.io/manypkgs/articles/agreements.html" class="external-link">article</a> on the <code>{manypkgs}</code> website.</p>
<p>Below are three examples of how to visualise treaty linkages for the references and the memberships datacubes in <a href="https://globalgov.github.io/manyenviron/">manyenviron</a>. We use <a href="https://stocnet.github.io/manynet/" class="external-link">manynet</a> to create the network plots, more information about the package can be found <a href="https://stocnet.github.io/manynet/" class="external-link">here</a>.</p>
<div class="section level3">
<h3 id="visualising-how-agreements-connect-by-references">Visualising How Agreements Connect by References<a class="anchor" aria-label="anchor" href="#visualising-how-agreements-connect-by-references"></a>
</h3>
<p>The graph below illustrates a sample of earliest 25 treaties from the references datacube. We select only treaties that cite other treaties. The treatyIDs are used to facilitate the reading and illustration of the relationships.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidygraph.data-imaginist.com" class="external-link">tidygraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stocnet.github.io/manynet/" class="external-link">manynet</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stocnet.github.io/migraph/" class="external-link">migraph</a></span><span class="op">)</span></span>
<span><span class="co"># Get the dataset and plot with manynet</span></span>
<span><span class="fu">manyenviron</span><span class="fu">::</span><span class="va"><a href="../reference/references.html">references</a></span><span class="op">$</span><span class="va">ECOLEX_REF</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">RefType</span> <span class="op">==</span> <span class="st">"Cites"</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">":"</span>, <span class="va">treatyID1</span><span class="op">)</span>,</span>
<span>         <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">":"</span>, <span class="va">treatyID2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/as.html" class="external-link">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">name</span>, <span class="st">"[:digit:]{4}"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1979</span>, <span class="va">year</span> <span class="op">&lt;</span> <span class="fl">2000</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/to_scope.html" class="external-link">to_no_isolates</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/autographr.html" class="external-link">autographr</a></span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"lineage"</span>, rank <span class="op">=</span> <span class="st">"year"</span>, node_size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>             node_color <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Treaty Lineage of Selected Agreements"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Source: manyenviron"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"sans"</span>, size <span class="op">=</span> <span class="fl">18</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/themes.html" class="external-link">theme_ethz</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; The Rgraphviz package is required to run this function. Would you like to install Rgraphviz from BioConductor? (Yes/no/cancel) </span></span>
<span><span class="co">#&gt; The BiocManager package is required to run this function. Would you like to install BiocManager from CRAN? (Yes/no/cancel) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  /var/folders/8_/r1lvzqc55v10qydntqm5c3j00000gn/T//Rtmpn80QgU/downloaded_packages</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  /var/folders/8_/r1lvzqc55v10qydntqm5c3j00000gn/T//Rtmpn80QgU/downloaded_packages</span></span>
<span><span class="co">#&gt; The RSiena package is required to run this function. Would you like to install RSiena from CRAN? (Yes/no/cancel) </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The downloaded binary packages are in</span></span>
<span><span class="co">#&gt;  /var/folders/8_/r1lvzqc55v10qydntqm5c3j00000gn/T//Rtmpn80QgU/downloaded_packages</span></span></code></pre></div>
<p><img src="connect_files/figure-html/lineage-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We can also take a look at a single lineage of Enviromental treaties. Let’s look at treaties that either cite or ammend the Ramsar Convention on Wetlands of International Importance Especially as Waterfowl Habitat (“RAMSA_1971A”).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">manyenviron</span><span class="fu">::</span><span class="va"><a href="../reference/references.html">references</a></span><span class="op">$</span><span class="va">ECOLEX_REF</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">treatyID2</span> <span class="op">==</span> <span class="st">"RAMSA_1971A"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/as.html" class="external-link">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">name</span>, <span class="st">"[:digit:]{4}"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         center <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"RAMSA_1971A"</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/autographr.html" class="external-link">autographr</a></span><span class="op">(</span>layout <span class="op">=</span> <span class="st">"lineage"</span>, rank <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>                      edge_color <span class="op">=</span> <span class="st">"RefType"</span>, node_color <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/scales.html" class="external-link">scale_color_sdgs</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/scales.html" class="external-link">scale_edge_color_centres</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Treaties that cite or ammend the Ramsar Convention 1971"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Source: manyenviron"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/themes.html" class="external-link">theme_iheid</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="connect_files/figure-html/ramsar-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="visualising-how-agreements-connect-by-country-membership-and-by-year">Visualising How Agreements Connect by Country Membership and by Year<a class="anchor" aria-label="anchor" href="#visualising-how-agreements-connect-by-country-membership-and-by-year"></a>
</h3>
<p>Or we can look at countries part of Enviromental treaties for certain years. The graph below illustrates the connection between parties and treaties for multilateral environmental agreements signed into force in the year of 1980 using the memberships database.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">manyenviron</span><span class="fu">::</span><span class="va"><a href="../reference/memberships.html">memberships</a></span><span class="op">$</span><span class="va">IEADB_MEM</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">manyID</span>, <span class="st">"[:digit:]{4}"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="st">"1980"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">treatyID</span>, <span class="va">stateID</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">treatyID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># keep only multilateral treaties</span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/as.html" class="external-link">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/activate.html" class="external-link">activate</a></span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_"</span>, <span class="va">name</span><span class="op">)</span>, <span class="st">"Treaty"</span>, <span class="st">"Country"</span><span class="op">)</span>,</span>
<span>                size <span class="op">=</span> <span class="fu">migraph</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/migraph/reference/degree_centrality.html" class="external-link">node_degree</a></span><span class="op">(</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,</span>
<span>                shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_"</span>, <span class="va">name</span><span class="op">)</span>, <span class="st">"triangle"</span>, <span class="st">"circle"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/reformat.html" class="external-link">to_undirected</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/autographr.html" class="external-link">autographr</a></span><span class="op">(</span>node_color <span class="op">=</span> <span class="st">"color"</span>, node_size <span class="op">=</span> <span class="st">"size"</span>, node_shape <span class="op">=</span> <span class="st">"shape"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/scales.html" class="external-link">scale_color_sdgs</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Countries part of environemntal treaties signed into force in 1980"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Sized by degree centrality (e.g. number of edges for each node)"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Source: manynenviron"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://stocnet.github.io/manynet/reference/themes.html" class="external-link">theme_uzh</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="connect_files/figure-html/1980-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="extra-dynamic-visualisation">Extra: dynamic visualisation<a class="anchor" aria-label="anchor" href="#extra-dynamic-visualisation"></a>
</h3>
<p>For events or panel network data, <a href="https://stocnet.github.io/manynet/" class="external-link">manynet</a> allows users to visualise how networks evolve over time as animations.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">manyenviron</span><span class="fu">::</span><span class="va"><a href="../reference/memberships.html">memberships</a></span><span class="op">$</span><span class="va">IEADB_MEM</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">manyID</span>, <span class="st">"[:digit:]{4}"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="st">"1950"</span> <span class="op">|</span> <span class="va">year</span> <span class="op">==</span> <span class="st">"1951"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">treatyID</span>, <span class="va">stateID</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">treatyID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># keep only multilateral treaties</span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/as.html" class="external-link">as_tidygraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_"</span>, <span class="va">name</span><span class="op">)</span>, <span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span>,</span>
<span>         shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"_"</span>, <span class="va">name</span><span class="op">)</span>, <span class="st">"triangle"</span>, <span class="st">"circle"</span><span class="op">)</span>,</span>
<span>         size <span class="op">=</span> <span class="fu">migraph</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/migraph/reference/degree_centrality.html" class="external-link">node_degree</a></span><span class="op">(</span><span class="op">)</span><span class="op">*</span><span class="fl">40</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/split.html" class="external-link">to_waves</a></span><span class="op">(</span>attribute <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">manynet</span><span class="fu">::</span><span class="fu"><a href="https://stocnet.github.io/manynet/reference/autographt.html" class="external-link">autographd</a></span><span class="op">(</span>keep_isolates <span class="op">=</span> <span class="cn">FALSE</span>, node_color <span class="op">=</span> <span class="st">"color"</span>, </span>
<span>                      node_size <span class="op">=</span> <span class="st">"size"</span>, node_shape <span class="op">=</span> <span class="st">"shape"</span><span class="op">)</span></span></code></pre></div>
<p><img src="dynamic-1.gif" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://jameshollway.com/" class="external-link">James Hollway</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Part of the <a href="https://panarchic.ch/" class="external-link">PANARCHIC project</a>.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
